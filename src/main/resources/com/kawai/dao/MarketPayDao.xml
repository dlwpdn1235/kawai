<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kawai.dao.MarketPayDao">

	<insert id="marketPayInsert" parameterType="MarketPay">
		insert into mpay (mPay_id,mPayCount,mPayDate,mOrder_id,user_id,market_id) values (#{mPay_id},#{mPayCount},
		#{mPayDate},#{mOrder_id},#{user_id},#{market_id})
	</insert>

	<update id="marketPayUpdate" parameterType="MarketPay">
		update mpay set mPayDate=#{mPayDate} where mpay_id = #{mOrder_id}
	</update>

	<delete id="marketPayDelete" parameterType="MarketPay">
		delete from mpay where mpay_id = #{mOrder_id}
	</delete>
	
	<select id="marketPayList" parameterType="MarketPay" resultType="MarketPay">
	SELECT p.mPay_id, p.mPayCount, o.mOrder_id, u.id, m.market_id
	FROM mPay p
	LEFT JOIN market m ON p.market_id = m.market_id
	LEFT JOIN user u ON p.user_id = u.id
	LEFT JOIN mOrder o ON p.mOrder_id = o.mOrder_id;
	</select>


</mapper>

