<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kawai.dao.MarketProductDao">
<resultMap id="market" type="Market">
		<id column="market_id" property="market_id" />
		<!-- property : MemberVO -->
		<result column="market_id" property="market_id" />
		<!-- column : db컬럼명 -->
		<result column="mTitle" property="mTitle" />
		<result column="mContent" property="mContent" />
		<result column="mIp" property="mIp" />
		<result column="mPrice" property="mPrice" />
		<result column="mDate" property="mDate" />
		<result column="user_id" property="user_id" />
		<association property="bookinfo"
			resultMap="commDtoBookinfo" />

	</resultMap>
	<resultMap id="commDtoBookinfo" type="CommDtoBookinfo">
		<id column="bookinfo_id" property="bookinfo_id" />
		<!-- property : MemberVO -->
		<result column="book_title" property="book_title" />
		<result column="book_description" property="book_description" />
		<result column="book_author" property="book_author" />
		<result column="book_publisher" property="book_publisher" />
		<result column="book_image" property="book_image" />
		<result column="book_pubdate" property="book_pubdate" />
	</resultMap>
<select parameterType="Market" id="marketRead"
		resultMap="market">
		SELECT a.market_id, a.user_id, a.mPrice, a.bookinfo_id,
		b.book_title, b.book_author, b.book_publisher, b.book_image,
		b.book_pubdate FROM market a LEFT JOIN bookinfo b ON a.bookinfo_id =
		b.bookinfo_id WHERE market_id = #{market_id} </select>
<insert id="marketProductList" parameterType="Market" >
	insert into market(mTitle,mContent,mIp,mPrice,user_id,bookinfo_id)values(#{mTitle},#{mContent},#{mIp},#{mPrice},#{user_id},#{bookinfo.bookinfo_id})
</insert>

</mapper>